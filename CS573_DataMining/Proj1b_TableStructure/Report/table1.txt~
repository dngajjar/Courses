1. PROGRAM OUTPUT
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * 
                    weather1.csv/Table['0']

        outlook,    -$humidity,         windy,         =play,  # notes 
#         sunny,         81.83,         FALSE,           yes,  # expected
#          0.00,         10.01,          0.00,          0.00,  # certainty
          sunny,            90,         FALSE,            no,  #       
          sunny,            90,          TRUE,            no,  #       
       overcast,            86,         FALSE,           yes,  #       
          rainy,            96,         FALSE,           yes,  #       
          rainy,            80,         FALSE,           yes,  #       
          rainy,             ?,          TRUE,            no,  #       
       overcast,            65,          TRUE,           yes,  #       
          sunny,             ?,         FALSE,            no,  #       
          sunny,            70,         FALSE,           yes,  #       
          rainy,            80,         FALSE,           yes,  #       
          sunny,            70,          TRUE,           yes,  #       
       overcast,            90,          TRUE,           yes,  #       
       overcast,            75,         FALSE,           yes,  #       
          rainy,            90,          TRUE,            no,  #       

* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * 
                    weather1.csv/Table['yes']

        outlook,    -$humidity,         windy,         =play,  # notes 
#      overcast,         79.11,         FALSE,           yes,  # expected
#          0.00,         10.22,          0.00,          1.00,  # certainty
       overcast,            86,         FALSE,           yes,  #       
          rainy,            96,         FALSE,           yes,  #       
          rainy,            80,         FALSE,           yes,  #       
       overcast,            65,          TRUE,           yes,  #       
          sunny,            70,         FALSE,           yes,  #       
          rainy,            80,         FALSE,           yes,  #       
          sunny,            70,          TRUE,           yes,  #       
       overcast,            90,          TRUE,           yes,  #       
       overcast,            75,         FALSE,           yes,  #       

* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * 
                    weather1.csv/Table['no']

        outlook,    -$humidity,         windy,         =play,  # notes 
#         sunny,         90.00,          TRUE,            no,  # expected
#          0.00,          0.00,          0.00,          1.00,  # certainty
          sunny,            90,         FALSE,            no,  #       
          sunny,            90,          TRUE,            no,  #       
          rainy,             ?,          TRUE,            no,  #       
          sunny,             ?,         FALSE,            no,  #       
          rainy,            90,          TRUE,            no,  #       

2. SOURCE CODES
File : <tablestr.py>

class Table:
    def __init__(self):
        self.data = []     #data[[col1,...],[col2,...]]
        self.name = []     #name of i-th column
        self.order = []    #order of the col
        self.nump = []     #is i-th column numeric?
        self.wordp = []    #is i-th column non-numeric?
        self.indep = []    #list of indep columns
        self.dep = []      #list of dep columns
        self.less = []     #numeric goal to be minimized
        self.more = []     #numeric goal to be maximized
        self.klass = []    #non-numeric goal
        self.term = []     #non-numeric non-goal
        self.num = []      #numeric non-goal
        # for all cols
        self.n = []        #count of things in this col
        # for wordp columns:
        self.count = []    #count of each word
        self.mode = []     #most common word
        self.most = []     #count of most common word
        # for nump columns:
        self.hi = []       #upper bound
        self.lo = []       #lower bound
        self.mu = []       #mean
        self.m2 = []       #sum of all nums
        self.sd = []       #standard deviation# 
        # table printing format
        self.CONVFMT = '%06d'
     
def centroid(table):
    max = len(table.name)
    rows = [[],[]]
    for c in range(max):
        c += 1
        s = table.mode[table.wordp.index(c)] if c in table.wordp else table.CONVFMT%table.mu[table.nump.index(c)]
        rows[0].append(str(s))
        s = table.most[table.wordp.index(c)]/table.n[c-1] if c in table.wordp else table.sd[table.nump.index(c)]
        rows[1].append(str(table.CONVFMT%s))
    return rows
        
def tableprint(table, stats=''):
    print ' '
    if stats != '': table.CONVFMT = stats 
    print(' ' + rowprint(table.name)+ '  # notes'.ljust(10))
    print('#' + rowprint(centroid(table)[0]) + '  # expected'.ljust(10))
    print('#' + rowprint(centroid(table)[1]) + '  # certainty'.ljust(10))    
    for j in range(len(table.data[0])):
        line = []
        for i in range(len(table.data)):
            line.append(table.data[i][j])
        print(' ' + rowprint(line)+ '  #'.ljust(10))

def tableprint_txt(table, f, tablename, stats=''):
    f.write('\n' +'* '*40+'\n'+' '*20+tablename + '\n'*2)
    if stats != '': table.CONVFMT = stats 
    f.write(' ' + rowprint(table.name)+ '  # notes'.ljust(10) + '\n')
    f.write('#' + rowprint(centroid(table)[0]) + '  # expected'.ljust(10) + '\n')
    f.write('#' + rowprint(centroid(table)[1]) + '  # certainty'.ljust(10) + '\n')    
    for j in range(len(table.data[0])):
        line = []
        for i in range(len(table.data)):
            line.append(table.data[i][j])
        f.write(' ' + rowprint(line)+ '  #'.ljust(10) + '\n')
    
def rowprint(a):
    max = len(a)
    line = ''
    for j in range(max):
        line += (a[j] + ',').rjust(15)
    return line
    
File : <reader.py>

import re
import tablestr
    
def readcsv(filename, table):
    FS = ','            #define field separator
    f = open(filename)
    seen  = 0
    while True:
        str = line(f)
        if str == -1:
            if seen == 0: print("WARNING: empty or missing file")
            return -1
        a = str.split(FS)        #compute the number of attributes 
        if len(a) > 1:
            if seen: addRow(a, table)
            else: makeTable(a, table)
            seen += 1
    
def line(f):
    str = f.readline()
    if not str: return -1             #read nothing, output error
    else:
        str = "".join(str.split())    #kill whilespace
        str = re.sub(r'#.*','',str)   #kill comments    
        if len(str) >= 1 and str[-1] == ',': return str + line(f)
        else: return str
            
def makeTable(a, table):
    max = len(a)
    c = 0
    for ite in range(max):
        if a[ite][0] == '?': continue  #'?'in col name is to ignore
        c += 1
        table.order.append(ite)
        x = a[ite]
        table.name.append(x)
        isNum = 1
        if x.find('=') != -1:
            table.dep.append(c)
            table.klass.append(c)
            isNum = 0
        elif x.find('+') != -1:           #num
            table.dep.append(c)
            table.more.append(c)
        elif x.find('-') != -1:           #num
            table.dep.append(c)
            table.less.append(c)
        elif x.find('$') != -1:           #num
            table.indep.append(c)
            table.num.append(c)
        else:
            table.indep.append(c)
            table.term.append(c)
            isNum = 0
        table.n.append('0')
        if isNum:
            table.nump.append(c)
            table.hi.append(-1*10**32)
            table.lo.append(10**32)
            table.mu.append(0)
            table.m2.append(0)
            table.sd.append(0)
        else:
            table.wordp.append(c)
            table.most.append(0)
            table.count.append({})
            table.mode.append('')
            
    for i in range(c):
        table.data.append([])
            
    
def addRow(a, table):
    #r = len(table.data) + 1
    for c in range(len(table.name)):
        f = table.order[c]
        x = a[f]
        table.data[c].append(x)
        if x.find('?') == -1:

            table.n[c] = int(table.n[c]) + 1
            c += 1
            if c in table.wordp:
                k = table.wordp.index(c)
                if table.count[k].has_key(x): table.count[k][x] += 1
                else: table.count[k][x] = 1
                new = table.count[k][x] 
                if new > table.most[k]:
                    table.mode[k] = x
                    table.most[k] = new
            else:
                k = table.nump.index(c)
                if float(x) > float(table.hi[k]): table.hi[k] = x
                if float(x) < float(table.lo[k]): table.lo[k] = x
                delta = float(x) - table.mu[k]
                table.mu[k] += delta/table.n[c-1]
                table.m2[k] += delta*(float(x) - table.mu[k])
                if table.n[c-1] > 1:
                    table.sd[k] = (table.m2[k]/(table.n[c-1] - 1))**0.5

def klasses(table):
    if len(table.klass) == 0:
        print "No labeled classes in the given data set"
        return -1
    # assume there is only one class feature in the data set
    k = table.order.index(table.klass[0])
    data = table.data[k]
    classnames = []
    for s in data:
        if s not in classnames:
            classnames.append(s)
    tables = klass1(table, classnames, data)
    tables['0'] = table
    return tables
    
def klass1(table, classnames, data):
    tables = {}
    for s in classnames:
        tables[s] = tablestr.Table()
        makeTable(table.name, tables[s])
        for i in range(len(data)):
            if s == data[i]:
                a = []
                for j in range(len(table.order)):
                    a.append(table.data[j][i])
                addRow(a, tables[s])
    return tables
                
   
<
