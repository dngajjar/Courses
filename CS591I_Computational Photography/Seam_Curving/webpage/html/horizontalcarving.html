<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--

Design by Free CSS Templates
http://www.freecsstemplates.org
Released for free under a Creative Commons Attribution 2.5 License

Title      : Vertical
Version    : 1.0
Released   : 20080915
Description: A two-column, fixed-width and lightweight template ideal for 1024x768 resolutions. Suitable for blogs and small websites.

-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Computational Photography -- Assignment 2</title>
<meta name="keywords" content="" />
<meta name="description" content="" />
<link href="default.css" rel="stylesheet" type="text/css" />
<style type="text/css">
<!--
.STYLE3 {color: #669966}
.STYLE5 {font-size: 16px; font-family: Geneva, Arial, Helvetica, sans-serif; font-weight: bold; }
.STYLE8 {font-family: Geneva, Arial, Helvetica, sans-serif; color: #28737B; font-weight: bold; font-size: 16px; }
.STYLE9 {
	color: #28737B;
	font-weight: bold;
	font-family: Geneva, Arial, Helvetica, sans-serif;
	font-size: 18;
	margin-top: -20px;
	line-height: 25px;
}
.STYLE15 {color: #6633FF; font-weight: bold; }
.STYLE16 {color: #6633FF}
.STYLE17 {font-weight: bold}
.STYLE19 {font-weight: bold}
.STYLE21 {font-weight: bold}
.STYLE23 {color: #0000FF; font-weight: bold; }
.STYLE26 {font-weight: bold}
.STYLE27 {font-weight: bold}
.STYLE28 {font-weight: bold}
.STYLE29 {font-weight: bold}
-->
</style>
</head>
<body>
<div id="wrapper">
<!-- start header -->
<div id="header">
	<div id="logo">
		<h1>COMPUTATIONAL PHOTOGRAPHY</h1>
		<h2>&nbsp;</h2>
		<h2>&nbsp;</h2>
		<h2><span class="STYLE5">Project 2<span class="STYLE3">- <a href="http://www.win.tue.nl/~wstahw/2IV05/seamcarving.pdf"><u>Seam Carving for Content-Aware Image Resizing</u></a></span></span></h2>
		<h2>&nbsp;</h2>
		<h2><span class="STYLE8">Student Name: Xue Yang </span></h2>
		<h2>&nbsp;</h2>
	</div>
	<p>&nbsp;</p>
	<div id="menu">
		<ul>
			<li class="active"><a href="http://www.csee.wvu.edu/~gidoretto/courses/2012-fall-cp/"><strong>Homepage</strong></a></li>
			<li><a href="mailto:xuyang@mix.wvu.edu"><strong>Contact Me </strong></a></li>
			<li></li>
			<li></li>
			<li></li>
		</ul>
	</div>
</div>
<!-- end header -->
<!-- start page -->
<div id="page">
	<!-- start content -->
	<div id="content">
		<div class="post">
			<h1 align="left" class="title"> Horizontal Carving </h1>
		  <div class="entry">
			  <p align="left" class="STYLE9">&nbsp;</p>
			  <p align="left" class="STYLE9">Horizontal carving is to find pathes from  left to right of the image with the smallest total energy. Then remove these determined pixels and shift all the other pixels  left in order to reduce the width of the image to the target size. The Horizontal carving operator are build based on the facts that: </p>
			  <p align="left" class="STYLE9">1). Remove equal number of pixels from each row;</p>
				<p align="left" class="STYLE9">2). Horizontal seam is an 8-connected path of pixels from top to bottom. </p>
				<p align="left" class="STYLE9">And the calculation process can be expressed as : </p>
			  <p align="left" class="STYLE9"><img width="425" height="20" src="formula/001.png" /><strong></strong></p>
				<p align="left" class="STYLE9">Where e(i,j) is the value of point (i,j) in the energy map, and M(i,j) is the total lowest energy value for the path from the left to the current location (i,j). </p>
				<p align="left" class="STYLE9">Using dynamic programming, we can accumulately calculate each path with the lowest energy. For instance, the computation starts from the second column, since the first column has stored the pixels' energy values. Then for each pixel in the second column (k, 2), where <em>k=1~imgHeight</em>, find its connected pixel in the first column (k-1, 1), (k, 1), (k+1, 1) with the lowest energy, add the value and store in the corresponding pixel (k, 2) on the second column. Repeatly conduct the calculation until reaching the final column. After the computation, the values on the last column are the total energy from the left to the corresponding pixels on the last column with the lowest energy. Then order the final column of the modified energy map in order to get the smallest number. Finally backtrack the path to figure out each coordinate in the determined path.</p>
				<p align="left" class="STYLE9">If we need to cut several Horizontal seams, just conduct this procedure k times. </p>
				<p align="left" class="STYLE9">&nbsp;</p>
		  </div>
	  </div>
	</div>
	<!-- end content -->
	<!-- start sidebar -->
	<div id="sidebar">
		<ul>

		  <li>
		    <h2 align="center"><strong>Introduction </strong></h2>
		    <ul>
              <li class="STYLE19">
                <div align="center"><a href="index.html">Project Introduction </a></div>
              </li>
	        </ul>
	      </li>
	      <li>
            <div align="center">
              <ul>
                <li>
                  <h2 align="center"><strong>Seam Carving </strong></h2>
                  <ul>
                    <li class="STYLE21">
                      <div align="center"><a href="horizontalcarving.html">Horizontal Carving </a></div>
                    </li>
                    <li>
                      <div align="center"><span class="STYLE23"><a href="verticalcarving.html">Vertical Carving </a></span></div>
                    </li>
                    <li></li>
                  </ul>
                </li>
                <li>
                  <ul>
                    <li>
                      <h2 align="center"><strong>Bells &amp; whistle</strong></h2>
                    </li>
                    <li>
                      <div align="center"><a href="optimal diagonal resize.html">Optimal Diagonal Resize</a></div>
                    </li>
                    <li class="STYLE27">
                      <div align="center"><a href="seam insertion.html">Seam Insertion</a></div>
                    </li>
                    <li class="STYLE28">
                      <div align="center"><a href="object removal.html">Object Removal</a></div>
                    </li>
                    <li class="STYLE29">
                      <div align="center"><a href="my masterpieces.html">My Masterpieces</a></div>
                    </li>
                    <li>
                      <div align="center"><strong><a href="different energy function.html">Different Energy Function</a></strong></div>
                    </li>
                    <li>
                      <div align="center"><strong><a href="bad result.html">Bad Results </a></strong></div>
                    </li>
                    <li></li>
                    <li></li>
                  </ul>
                </li>
              </ul>
            </div>
          </li>
	  </ul>
	</div>
	<!-- end sidebar -->
	<div style="clear: both;">&nbsp;
	  <div class="post">
		<h1 align="left" class="title"> Examples </h1>
		<p><span class="STYLE9">In the horizontal seam carving experiment, I tried different number of seams to cut (1, 50, 100, 150) in several images, and the output images are shown below.</span></p>
	  </div>
	  <table width="1185" border="3" bordercolor="#66CCFF">
        <tr>
          <td><div align="center"><span class="STYLE15">Original Image </span></div></td>
          <td><div align="center"><span class="STYLE15">Image Labled with the Seam </span></div></td>
          <td><div align="center"><span class="STYLE15"># of Horizontal Seams Carving </span></div></td>
        </tr>
        <tr>
          <td><div align="center"><img src="images/group2/original.jpg" alt="" width="500" height="312" /></div></td>
          <td><div align="center"><img src="images/group2/horizontal 30.gif" alt="" width="500" height="312" /></div></td>
          <td><div align="center">30</div></td>
        </tr>
        <tr>
          <td><div align="center" class="STYLE15">Original Image (500 * 332) </div></td>
          <td><div align="center" class="STYLE15">Resized Image (450 * 332) </div></td>
          <td><div align="center"><span class="STYLE15"># of Horizontal Seams Carving </span></div></td>
        </tr>
        <tr>
          <td><div align="center"><img src="images/group1/original.jpg" alt="" width="500" height="332" border="3" /></div></td>
          <td><div align="center"><img src="images/group1/vertical50.jpg" alt="" width="450" height="332" border="3" /></div></td>
          <td><div align="center">50</div></td>
        </tr>
        <tr>
          <td width="519"><div align="center" class="STYLE16"><strong>Original Image </strong>(500 * 500) </div></td>
          <td width="511"><div align="center"><span class="STYLE15">Resized Image (400 * 500) </span></div></td>
          <td width="129"><div align="center"><span class="STYLE15"># of Horizontal Seams Carving </span></div></td>
        </tr>
        <tr>
          <td><div align="center"><img src="images/group0/original.jpg" alt="" width="500" height="500" /></div></td>
          <td><div align="center"><img src="images/group0/vertical100.jpg" alt="" width="400" height="500" /></div></td>
          <td><div align="center">100</div></td>
        </tr>
        <tr>
          <td><div align="center"><span class="STYLE15">Original Image(500 * 301)</span></div></td>
          <td><div align="center" class="STYLE17"><span class="STYLE16 STYLE16">Resize Image </span><span class="STYLE16">(350 * 301)</span></div></td>
          <td><div align="center"><span class="STYLE15"># of Horizontal Seams Carving</span></div></td>
        </tr>
        <tr>
          <td><img src="images/group3/original.jpg" alt="" width="500" height="301" border="3" /></td>
          <td><div align="center"><img src="images/group3/vertical150.jpg" alt="" width="350" height="301" border="3" /></div></td>
          <td><div align="center">150</div></td>
        </tr>
        <tr>
          <td><div align="center"><strong><span class="STYLE16">Original Image(500 * 500)</span></strong></div></td>
          <td><div align="center"><span class="STYLE16"><strong>Resize Image </strong></span><span class="STYLE15">(200* 500)</span></div></td>
          <td><span class="STYLE15"># of Horizontal Seams Carving</span></td>
        </tr>
        <tr>
          <td><img src="images/group4/original.jpg" alt="" width="501" height="400" border="3" /></td>
          <td><div align="center"><img src="images/group4/vertical250.jpg" alt="" width="250" height="400" border="3" /></div></td>
          <td><div align="center" class="STYLE16">250</div></td>
        </tr>
      </table>
    </div>
</div>
<!-- end page -->
<!-- start footer -->

</div>
<!-- end footer -->
</body>
</html>
